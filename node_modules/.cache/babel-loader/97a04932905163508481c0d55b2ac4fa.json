{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _postcss = _interopRequireDefault(require(\"postcss\"));\n\nvar _escapeClassName = _interopRequireDefault(require(\"../util/escapeClassName\"));\n\nvar _prefixSelector = _interopRequireDefault(require(\"../util/prefixSelector\"));\n\nvar _increaseSpecificity = _interopRequireDefault(require(\"../util/increaseSpecificity\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction buildClassTable(css) {\n  const classTable = {};\n  css.walkRules(rule => {\n    if (!_lodash.default.has(classTable, rule.selector)) {\n      classTable[rule.selector] = [];\n    }\n\n    classTable[rule.selector].push(rule);\n  });\n  return classTable;\n}\n\nfunction buildShadowTable(generatedUtilities) {\n  const utilities = _postcss.default.root();\n\n  _postcss.default.root({\n    nodes: generatedUtilities\n  }).walkAtRules('variants', atRule => {\n    utilities.append(atRule.clone().nodes);\n  });\n\n  return buildClassTable(utilities);\n}\n\nfunction normalizeClassName(className) {\n  return `.${(0, _escapeClassName.default)(_lodash.default.trimStart(className, '.'))}`;\n}\n\nfunction findClass(classToApply, classTable, onError) {\n  const matches = _lodash.default.get(classTable, classToApply, []);\n\n  if (_lodash.default.isEmpty(matches)) {\n    return [];\n  }\n\n  if (matches.length > 1) {\n    // prettier-ignore\n    throw onError(`\\`@apply\\` cannot be used with ${classToApply} because ${classToApply} is included in multiple rulesets.`);\n  }\n\n  const [match] = matches;\n\n  if (match.parent.type !== 'root') {\n    // prettier-ignore\n    throw onError(`\\`@apply\\` cannot be used with ${classToApply} because ${classToApply} is nested inside of an at-rule (@${match.parent.name}).`);\n  }\n\n  return match.clone().nodes;\n}\n\nfunction _default(config, generatedUtilities) {\n  return function (css) {\n    const classLookup = buildClassTable(css);\n    const shadowLookup = buildShadowTable(generatedUtilities);\n    css.walkRules(rule => {\n      rule.walkAtRules('apply', atRule => {\n        const classesAndProperties = _postcss.default.list.space(atRule.params);\n        /*\n         * Don't wreck CSSNext-style @apply rules:\n         * http://cssnext.io/features/#custom-properties-set-apply\n         *\n         * These are deprecated in CSSNext but still playing it safe for now.\n         * We might consider renaming this at-rule.\n         */\n\n\n        const [customProperties, classes] = _lodash.default.partition(classesAndProperties, classOrProperty => {\n          return _lodash.default.startsWith(classOrProperty, '--');\n        });\n\n        const decls = (0, _lodash.default)(classes).reject(cssClass => cssClass === '!important').flatMap(cssClass => {\n          const classToApply = normalizeClassName(cssClass);\n\n          const onError = message => {\n            return atRule.error(message);\n          };\n\n          return _lodash.default.reduce([// Find exact class match in user's CSS\n          () => {\n            return findClass(classToApply, classLookup, onError);\n          }, // Find exact class match in shadow lookup\n          () => {\n            return findClass(classToApply, shadowLookup, onError);\n          }, // Find prefixed version of class in shadow lookup\n          () => {\n            return findClass((0, _prefixSelector.default)(config.prefix, classToApply), shadowLookup, onError);\n          }, // Find important-scoped version of class in shadow lookup\n          () => {\n            return findClass((0, _increaseSpecificity.default)(config.important, classToApply), shadowLookup, onError);\n          }, // Find important-scoped and prefixed version of class in shadow lookup\n          () => {\n            return findClass((0, _increaseSpecificity.default)(config.important, (0, _prefixSelector.default)(config.prefix, classToApply)), shadowLookup, onError);\n          }, () => {\n            // prettier-ignore\n            throw onError(`\\`@apply\\` cannot be used with \\`${classToApply}\\` because \\`${classToApply}\\` either cannot be found, or its actual definition includes a pseudo-selector like :hover, :active, etc. If you're sure that \\`${classToApply}\\` exists, make sure that any \\`@import\\` statements are being properly processed *before* Tailwind CSS sees your CSS, as \\`@apply\\` can only be used for classes in the same CSS tree.`);\n          }], (classDecls, candidate) => !_lodash.default.isEmpty(classDecls) ? classDecls : candidate(), []);\n        }).value();\n\n        _lodash.default.tap(_lodash.default.last(classesAndProperties) === '!important', important => {\n          decls.forEach(decl => decl.important = important);\n        });\n\n        atRule.before(decls);\n        atRule.params = customProperties.join(' ');\n\n        if (_lodash.default.isEmpty(customProperties)) {\n          atRule.remove();\n        }\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/home/daniel/work/projet/portfolio/node_modules/tailwindcss/lib/lib/substituteClassApplyAtRules.js"],"names":["Object","defineProperty","exports","value","default","_default","_lodash","_interopRequireDefault","require","_postcss","_escapeClassName","_prefixSelector","_increaseSpecificity","obj","__esModule","buildClassTable","css","classTable","walkRules","rule","has","selector","push","buildShadowTable","generatedUtilities","utilities","root","nodes","walkAtRules","atRule","append","clone","normalizeClassName","className","trimStart","findClass","classToApply","onError","matches","get","isEmpty","length","match","parent","type","name","config","classLookup","shadowLookup","classesAndProperties","list","space","params","customProperties","classes","partition","classOrProperty","startsWith","decls","reject","cssClass","flatMap","message","error","reduce","prefix","important","classDecls","candidate","tap","last","forEach","decl","before","join","remove"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkBC,QAAlB;;AAEA,IAAIC,OAAO,GAAGC,sBAAsB,CAACC,OAAO,CAAC,QAAD,CAAR,CAApC;;AAEA,IAAIC,QAAQ,GAAGF,sBAAsB,CAACC,OAAO,CAAC,SAAD,CAAR,CAArC;;AAEA,IAAIE,gBAAgB,GAAGH,sBAAsB,CAACC,OAAO,CAAC,yBAAD,CAAR,CAA7C;;AAEA,IAAIG,eAAe,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,wBAAD,CAAR,CAA5C;;AAEA,IAAII,oBAAoB,GAAGL,sBAAsB,CAACC,OAAO,CAAC,6BAAD,CAAR,CAAjD;;AAEA,SAASD,sBAAT,CAAgCM,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAET,IAAAA,OAAO,EAAES;AAAX,GAArC;AAAwD;;AAE/F,SAASE,eAAT,CAAyBC,GAAzB,EAA8B;AAC5B,QAAMC,UAAU,GAAG,EAAnB;AACAD,EAAAA,GAAG,CAACE,SAAJ,CAAcC,IAAI,IAAI;AACpB,QAAI,CAACb,OAAO,CAACF,OAAR,CAAgBgB,GAAhB,CAAoBH,UAApB,EAAgCE,IAAI,CAACE,QAArC,CAAL,EAAqD;AACnDJ,MAAAA,UAAU,CAACE,IAAI,CAACE,QAAN,CAAV,GAA4B,EAA5B;AACD;;AAEDJ,IAAAA,UAAU,CAACE,IAAI,CAACE,QAAN,CAAV,CAA0BC,IAA1B,CAA+BH,IAA/B;AACD,GAND;AAOA,SAAOF,UAAP;AACD;;AAED,SAASM,gBAAT,CAA0BC,kBAA1B,EAA8C;AAC5C,QAAMC,SAAS,GAAGhB,QAAQ,CAACL,OAAT,CAAiBsB,IAAjB,EAAlB;;AAEAjB,EAAAA,QAAQ,CAACL,OAAT,CAAiBsB,IAAjB,CAAsB;AACpBC,IAAAA,KAAK,EAAEH;AADa,GAAtB,EAEGI,WAFH,CAEe,UAFf,EAE2BC,MAAM,IAAI;AACnCJ,IAAAA,SAAS,CAACK,MAAV,CAAiBD,MAAM,CAACE,KAAP,GAAeJ,KAAhC;AACD,GAJD;;AAMA,SAAOZ,eAAe,CAACU,SAAD,CAAtB;AACD;;AAED,SAASO,kBAAT,CAA4BC,SAA5B,EAAuC;AACrC,SAAQ,IAAG,CAAC,GAAGvB,gBAAgB,CAACN,OAArB,EAA8BE,OAAO,CAACF,OAAR,CAAgB8B,SAAhB,CAA0BD,SAA1B,EAAqC,GAArC,CAA9B,CAAyE,EAApF;AACD;;AAED,SAASE,SAAT,CAAmBC,YAAnB,EAAiCnB,UAAjC,EAA6CoB,OAA7C,EAAsD;AACpD,QAAMC,OAAO,GAAGhC,OAAO,CAACF,OAAR,CAAgBmC,GAAhB,CAAoBtB,UAApB,EAAgCmB,YAAhC,EAA8C,EAA9C,CAAhB;;AAEA,MAAI9B,OAAO,CAACF,OAAR,CAAgBoC,OAAhB,CAAwBF,OAAxB,CAAJ,EAAsC;AACpC,WAAO,EAAP;AACD;;AAED,MAAIA,OAAO,CAACG,MAAR,GAAiB,CAArB,EAAwB;AACtB;AACA,UAAMJ,OAAO,CAAE,kCAAiCD,YAAa,YAAWA,YAAa,oCAAxE,CAAb;AACD;;AAED,QAAM,CAACM,KAAD,IAAUJ,OAAhB;;AAEA,MAAII,KAAK,CAACC,MAAN,CAAaC,IAAb,KAAsB,MAA1B,EAAkC;AAChC;AACA,UAAMP,OAAO,CAAE,kCAAiCD,YAAa,YAAWA,YAAa,qCAAoCM,KAAK,CAACC,MAAN,CAAaE,IAAK,IAA9H,CAAb;AACD;;AAED,SAAOH,KAAK,CAACX,KAAN,GAAcJ,KAArB;AACD;;AAED,SAAStB,QAAT,CAAkByC,MAAlB,EAA0BtB,kBAA1B,EAA8C;AAC5C,SAAO,UAAUR,GAAV,EAAe;AACpB,UAAM+B,WAAW,GAAGhC,eAAe,CAACC,GAAD,CAAnC;AACA,UAAMgC,YAAY,GAAGzB,gBAAgB,CAACC,kBAAD,CAArC;AACAR,IAAAA,GAAG,CAACE,SAAJ,CAAcC,IAAI,IAAI;AACpBA,MAAAA,IAAI,CAACS,WAAL,CAAiB,OAAjB,EAA0BC,MAAM,IAAI;AAClC,cAAMoB,oBAAoB,GAAGxC,QAAQ,CAACL,OAAT,CAAiB8C,IAAjB,CAAsBC,KAAtB,CAA4BtB,MAAM,CAACuB,MAAnC,CAA7B;AACA;;;;;;;;;AASA,cAAM,CAACC,gBAAD,EAAmBC,OAAnB,IAA8BhD,OAAO,CAACF,OAAR,CAAgBmD,SAAhB,CAA0BN,oBAA1B,EAAgDO,eAAe,IAAI;AACrG,iBAAOlD,OAAO,CAACF,OAAR,CAAgBqD,UAAhB,CAA2BD,eAA3B,EAA4C,IAA5C,CAAP;AACD,SAFmC,CAApC;;AAIA,cAAME,KAAK,GAAG,CAAC,GAAGpD,OAAO,CAACF,OAAZ,EAAqBkD,OAArB,EAA8BK,MAA9B,CAAqCC,QAAQ,IAAIA,QAAQ,KAAK,YAA9D,EAA4EC,OAA5E,CAAoFD,QAAQ,IAAI;AAC5G,gBAAMxB,YAAY,GAAGJ,kBAAkB,CAAC4B,QAAD,CAAvC;;AAEA,gBAAMvB,OAAO,GAAGyB,OAAO,IAAI;AACzB,mBAAOjC,MAAM,CAACkC,KAAP,CAAaD,OAAb,CAAP;AACD,WAFD;;AAIA,iBAAOxD,OAAO,CAACF,OAAR,CAAgB4D,MAAhB,CAAuB,CAAC;AAC/B,gBAAM;AACJ,mBAAO7B,SAAS,CAACC,YAAD,EAAeW,WAAf,EAA4BV,OAA5B,CAAhB;AACD,WAH6B,EAG3B;AACH,gBAAM;AACJ,mBAAOF,SAAS,CAACC,YAAD,EAAeY,YAAf,EAA6BX,OAA7B,CAAhB;AACD,WAN6B,EAM3B;AACH,gBAAM;AACJ,mBAAOF,SAAS,CAAC,CAAC,GAAGxB,eAAe,CAACP,OAApB,EAA6B0C,MAAM,CAACmB,MAApC,EAA4C7B,YAA5C,CAAD,EAA4DY,YAA5D,EAA0EX,OAA1E,CAAhB;AACD,WAT6B,EAS3B;AACH,gBAAM;AACJ,mBAAOF,SAAS,CAAC,CAAC,GAAGvB,oBAAoB,CAACR,OAAzB,EAAkC0C,MAAM,CAACoB,SAAzC,EAAoD9B,YAApD,CAAD,EAAoEY,YAApE,EAAkFX,OAAlF,CAAhB;AACD,WAZ6B,EAY3B;AACH,gBAAM;AACJ,mBAAOF,SAAS,CAAC,CAAC,GAAGvB,oBAAoB,CAACR,OAAzB,EAAkC0C,MAAM,CAACoB,SAAzC,EAAoD,CAAC,GAAGvD,eAAe,CAACP,OAApB,EAA6B0C,MAAM,CAACmB,MAApC,EAA4C7B,YAA5C,CAApD,CAAD,EAAiHY,YAAjH,EAA+HX,OAA/H,CAAhB;AACD,WAf6B,EAe3B,MAAM;AACP;AACA,kBAAMA,OAAO,CAAE,oCAAmCD,YAAa,gBAAeA,YAAa,mIAAkIA,YAAa,yLAA7N,CAAb;AACD,WAlB6B,CAAvB,EAkBH,CAAC+B,UAAD,EAAaC,SAAb,KAA2B,CAAC9D,OAAO,CAACF,OAAR,CAAgBoC,OAAhB,CAAwB2B,UAAxB,CAAD,GAAuCA,UAAvC,GAAoDC,SAAS,EAlBrF,EAkByF,EAlBzF,CAAP;AAmBD,SA1Ba,EA0BXjE,KA1BW,EAAd;;AA4BAG,QAAAA,OAAO,CAACF,OAAR,CAAgBiE,GAAhB,CAAoB/D,OAAO,CAACF,OAAR,CAAgBkE,IAAhB,CAAqBrB,oBAArB,MAA+C,YAAnE,EAAiFiB,SAAS,IAAI;AAC5FR,UAAAA,KAAK,CAACa,OAAN,CAAcC,IAAI,IAAIA,IAAI,CAACN,SAAL,GAAiBA,SAAvC;AACD,SAFD;;AAIArC,QAAAA,MAAM,CAAC4C,MAAP,CAAcf,KAAd;AACA7B,QAAAA,MAAM,CAACuB,MAAP,GAAgBC,gBAAgB,CAACqB,IAAjB,CAAsB,GAAtB,CAAhB;;AAEA,YAAIpE,OAAO,CAACF,OAAR,CAAgBoC,OAAhB,CAAwBa,gBAAxB,CAAJ,EAA+C;AAC7CxB,UAAAA,MAAM,CAAC8C,MAAP;AACD;AACF,OArDD;AAsDD,KAvDD;AAwDD,GA3DD;AA4DD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _postcss = _interopRequireDefault(require(\"postcss\"));\n\nvar _escapeClassName = _interopRequireDefault(require(\"../util/escapeClassName\"));\n\nvar _prefixSelector = _interopRequireDefault(require(\"../util/prefixSelector\"));\n\nvar _increaseSpecificity = _interopRequireDefault(require(\"../util/increaseSpecificity\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction buildClassTable(css) {\n  const classTable = {};\n  css.walkRules(rule => {\n    if (!_lodash.default.has(classTable, rule.selector)) {\n      classTable[rule.selector] = [];\n    }\n\n    classTable[rule.selector].push(rule);\n  });\n  return classTable;\n}\n\nfunction buildShadowTable(generatedUtilities) {\n  const utilities = _postcss.default.root();\n\n  _postcss.default.root({\n    nodes: generatedUtilities\n  }).walkAtRules('variants', atRule => {\n    utilities.append(atRule.clone().nodes);\n  });\n\n  return buildClassTable(utilities);\n}\n\nfunction normalizeClassName(className) {\n  return `.${(0, _escapeClassName.default)(_lodash.default.trimStart(className, '.'))}`;\n}\n\nfunction findClass(classToApply, classTable, onError) {\n  const matches = _lodash.default.get(classTable, classToApply, []);\n\n  if (_lodash.default.isEmpty(matches)) {\n    return [];\n  }\n\n  if (matches.length > 1) {\n    // prettier-ignore\n    throw onError(`\\`@apply\\` cannot be used with ${classToApply} because ${classToApply} is included in multiple rulesets.`);\n  }\n\n  const [match] = matches;\n\n  if (match.parent.type !== 'root') {\n    // prettier-ignore\n    throw onError(`\\`@apply\\` cannot be used with ${classToApply} because ${classToApply} is nested inside of an at-rule (@${match.parent.name}).`);\n  }\n\n  return match.clone().nodes;\n}\n\nfunction _default(config, generatedUtilities) {\n  return function (css) {\n    const classLookup = buildClassTable(css);\n    const shadowLookup = buildShadowTable(generatedUtilities);\n    css.walkRules(rule => {\n      rule.walkAtRules('apply', atRule => {\n        const classesAndProperties = _postcss.default.list.space(atRule.params);\n        /*\n         * Don't wreck CSSNext-style @apply rules:\n         * http://cssnext.io/features/#custom-properties-set-apply\n         *\n         * These are deprecated in CSSNext but still playing it safe for now.\n         * We might consider renaming this at-rule.\n         */\n\n\n        const [customProperties, classes] = _lodash.default.partition(classesAndProperties, classOrProperty => {\n          return _lodash.default.startsWith(classOrProperty, '--');\n        });\n\n        const decls = (0, _lodash.default)(classes).reject(cssClass => cssClass === '!important').flatMap(cssClass => {\n          const classToApply = normalizeClassName(cssClass);\n\n          const onError = message => {\n            return atRule.error(message);\n          };\n\n          return _lodash.default.reduce([// Find exact class match in user's CSS\n          () => {\n            return findClass(classToApply, classLookup, onError);\n          }, // Find exact class match in shadow lookup\n          () => {\n            return findClass(classToApply, shadowLookup, onError);\n          }, // Find prefixed version of class in shadow lookup\n          () => {\n            return findClass((0, _prefixSelector.default)(config.prefix, classToApply), shadowLookup, onError);\n          }, // Find important-scoped version of class in shadow lookup\n          () => {\n            return findClass((0, _increaseSpecificity.default)(config.important, classToApply), shadowLookup, onError);\n          }, // Find important-scoped and prefixed version of class in shadow lookup\n          () => {\n            return findClass((0, _increaseSpecificity.default)(config.important, (0, _prefixSelector.default)(config.prefix, classToApply)), shadowLookup, onError);\n          }, () => {\n            // prettier-ignore\n            throw onError(`\\`@apply\\` cannot be used with \\`${classToApply}\\` because \\`${classToApply}\\` either cannot be found, or its actual definition includes a pseudo-selector like :hover, :active, etc. If you're sure that \\`${classToApply}\\` exists, make sure that any \\`@import\\` statements are being properly processed *before* Tailwind CSS sees your CSS, as \\`@apply\\` can only be used for classes in the same CSS tree.`);\n          }], (classDecls, candidate) => !_lodash.default.isEmpty(classDecls) ? classDecls : candidate(), []);\n        }).value();\n\n        _lodash.default.tap(_lodash.default.last(classesAndProperties) === '!important', important => {\n          decls.forEach(decl => decl.important = important);\n        });\n\n        atRule.before(decls);\n        atRule.params = customProperties.join(' ');\n\n        if (_lodash.default.isEmpty(customProperties)) {\n          atRule.remove();\n        }\n      });\n    });\n  };\n}"]},"metadata":{},"sourceType":"script"}